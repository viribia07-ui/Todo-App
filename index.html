<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Todos</title>
</head>
<body class="min-h-screen flex flex-col items-center bg-slate-900 text-indigo-950">
    <div class="bg-indigo-200 flex flex-col items-center justify-center border border-double border-violet-700 rounded-lg m-5 p-2">
        <h1 class="text-3xl font-bold text-clifford m-2">Todo App</h1>
        <div class="m-3">
            <input type="text" name="" id="task" class="border rounded w-64 p-2">
            <button onclick="addtask()">Hozzáad</button>

        </div>
        <ul id="todolist" class="p-5 m-1"></ul>
    </div>

    <script>
        //kapjuk az adatokat a szerverről:
        let todos=[
            {id:1, task:"Bevásárlás", done:false},
            {id:2, task:"JS Tanulás", done:true},
            {id:3, task:"Biciklizés", done:false},
        ]

        const render=()=>{
            document.getElementById('todolist').innerHTML=todos.map(obj=>`
                <li class="m-1">
                    <span class="${obj.done? 'line-through':''}">${obj.task}</span>
                    <i class="fa-solid fa-check cursor-pointer ${obj.done ? 'text-indigo-500' : 'text-indigo-900'}" onclick="toggleDone(${obj.id})"></i>
                    <i class="fa-solid fa-trash cursor-pointer text-purple-950" onclik="removetask(${obj.id})"></i>
                </li>`).join("")
        }

        const addtask=()=>{
            const task =document.getElementById('task').value
            console.log(task);
            if(!task) return
            const flag=todos.some(obj=>obj.task==task) //ne legyen 2 egyforma task
            if(flag) return
            const newTask={id:Date.now(), task, done:false}
            document.getElementById('task').value=""
            todos=[...todos, newTask]
            render()
        }

        const toggleDone=(id)=>{
            console.log(id);
            todos=todos.map(obj=>obj.id==id ? {...obj, done:!obj.done} : obj)
            render()
        }

        const removetask=(id)=>{
            console.log(id);
            todos=todos.filter(obj=>obj.id!=id)
            render()
        }

        //első látogatáskor
        render()

    </script>

</body>
</html>